{% extends "base.html" %}
{% block content %}
<section class="container">
  <div class="section-heading">
    <div>
      <p class="eyebrow">Evidence library</p>
      <h1>All evaluation reports</h1>
      <p class="lead">Compare multiple apps or track the same product over time. Sort by highest quality score to spot exemplars quickly.</p>
    </div>
    <a class="btn ghost" href="/evaluate">Add new evaluation</a>
  </div>

  <div class="grid-3">
    {% if evaluations %}
      {% for evaluation in evaluations %}
        <article class="card hover">
          <div class="score-chip">{{ '%.1f' | format(evaluation.quality_score) }}%</div>
          <h3>{{ evaluation.app_name }}</h3>
          <p class="muted">{{ evaluation.audience or "General audience" }}</p>
          <p>{{ evaluation.summary or "No summary provided" }}</p>
          <dl class="score-grid">
            <div>
              <dt>Pedagogy</dt>
              <dd>{{ evaluation.pedagogical_design }}/5</dd>
            </div>
            <div>
              <dt>UI/UX</dt>
              <dd>{{ evaluation.ui_ux }}/5</dd>
            </div>
            <div>
              <dt>Engagement</dt>
              <dd>{{ evaluation.engagement }}/5</dd>
            </div>
            <div>
              <dt>Technical</dt>
              <dd>{{ evaluation.technical_performance }}/5</dd>
            </div>
            <div>
              <dt>Learning</dt>
              <dd>{{ evaluation.learning_effectiveness }}/5</dd>
            </div>
          </dl>
          <div class="card-actions">
            <a href="/reports/{{ evaluation.id }}" class="btn secondary">Open report</a>
            <button
              type="button"
              class="btn danger ghost"
              data-delete-trigger
              data-target="delete-form-{{ evaluation.id }}"
              data-app-name="{{ evaluation.app_name }}"
            >
              Delete
            </button>
          </div>
          <form id="delete-form-{{ evaluation.id }}" method="post" action="/reports/{{ evaluation.id }}/delete"></form>
        </article>
      {% endfor %}
    {% else %}
      <article class="card">
        <p>No evaluations captured yet. Use the “Add new evaluation” button to create the first record.</p>
      </article>
    {% endif %}
  </div>
</section>

<div class="modal-backdrop is-hidden" id="delete-modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal-card">
    <p class="eyebrow">Confirmation</p>
    <h2 id="delete-modal-title">Delete this report?</h2>
    <p class="muted" id="delete-modal-body">This action cannot be undone. The evaluation record and insights will be removed.</p>
    <div class="modal-actions">
      <button type="button" class="btn ghost" data-modal-cancel>Keep report</button>
      <button type="button" class="btn danger" data-modal-confirm>Delete</button>
    </div>
  </div>
</div>
{% endblock %}
